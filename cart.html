<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>سبد خرید — شایان</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>body{font-family:Vazirmatn,system-ui,sans-serif;background:#f6f8fb;color:#0f172a} header{background:#0f172a;color:#fff;padding:12px;text-align:center}</style>
</head>
<body>
  <header><h3>سبد خرید شما</h3></header>
  <main class="container py-4">
    <div id="cartArea"></div>
    <div class="mt-4 text-center">
      <a id="toCheckout" class="btn btn-success" href="checkout.html">تأیید نهایی و ثبت اطلاعات خریدار</a>
      <a class="btn btn-secondary" href="index.html">بازگشت به خانه</a>
    </div>
  </main>

<script>
  function getCart(){ return JSON.parse(localStorage.getItem("shop_cart_v1") || "[]"); }
  function saveCart(cart){ localStorage.setItem("shop_cart_v1", JSON.stringify(cart)); render(); }
  function render(){
    const area = document.getElementById("cartArea");
    const cart = getCart();
    if(cart.length===0){ area.innerHTML = '<div class="alert alert-info">سبد خرید خالی است.</div>'; document.getElementById('toCheckout').classList.add('disabled'); return; }
    let html = `<div class="list-group">`;
    cart.forEach((item, idx)=>{
      html += `<div class="list-group-item d-flex align-items-center">
        <img src="${item.image}" style="height:60px;margin-left:12px" alt="">
        <div class="flex-grow-1">
          <div><strong>${item.title}</strong></div>
          <div class="small text-muted">شناسه: ${item.id}</div>
        </div>
        <div style="width:170px">
          <div class="input-group">
            <button class="btn btn-outline-secondary" onclick="changeQty(${idx}, -1)">−</button>
            <input class="form-control text-center" value="${item.qty}" readonly style="max-width:60px">
            <button class="btn btn-outline-secondary" onclick="changeQty(${idx}, 1)">+</button>
          </div>
          <div class="mt-2 text-end">
            <button class="btn btn-sm btn-danger" onclick="removeItem(${idx})">حذف</button>
          </div>
        </div>
      </div>`;
    });
    html += `</div>`;
    area.innerHTML = html;
  }
  function changeQty(idx, delta){ const cart=getCart(); cart[idx].qty = Math.max(1, cart[idx].qty + delta); saveCart(cart); }
  function removeItem(idx){ const cart=getCart(); cart.splice(idx,1); saveCart(cart); }
  render();
</script>
</body>
</html>
